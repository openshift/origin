apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: compliancesuite-template
objects:
- apiVersion: compliance.openshift.io/v1alpha1
  kind: ComplianceSuite
  metadata:
    name: "${NAME}"
    namespace: "${NAMESPACE}"
  spec:
    autoApplyRemediations: false
    schedule: "${SCHEDULE}"  
    scans:
      - name: "${SCANNAME}" 
        profile: "${PROFILE}"
        scanType: "${SCANTYPE}"  
        content: "${CONTENT}"
        contentImage: "${CONTENTIMAGE}"
        rule: "${RULE}"
        debug: true
        noExternalResources: ${{NOEXTERNALRESOURCES}}
        nodeSelector: 
          node-role.kubernetes.io/${NODESELECTOR}: ""
        rawResultStorage:
          nodeSelector:
            node-role.kubernetes.io/master: ""
          pvAccessModes:
            - "${PVACCESSMODE}"
          size: "${SIZE}"
          rotation: ${{ROTATION}}
          storageClassName: "${STORAGECLASSNAME}"
          tolerations:
          - effect: NoSchedule
            key: node-role.kubernetes.io/master
            operator: Exists
          - effect: NoExecute
            key: node.kubernetes.io/not-ready
            operator: Exists
            tolerationSeconds: 300
          - effect: NoExecute
            key: node.kubernetes.io/unreachable
            operator: Exists
            tolerationSeconds: 300
          - effect: NoSchedule
            key: node.kubernetes.io/memory-pressure
            operator: Exists

parameters:
- name: NAME
- name: NAMESPACE
- name: SCHEDULE  
- name: SCANNAME
- name: PROFILE
- name: SCANTYPE  
- name: CONTENT
- name: CONTENTIMAGE
- name: RULE
- name: NOEXTERNALRESOURCES
- name: NODESELECTOR
- name: SIZE
- name: ROTATION
- name: PVACCESSMODE
- name: STORAGECLASSNAME
