{
  "metadata":{
    "name":"docker-registry"
  },
  "kind":"Config",
  "apiVersion":"v1beta1",
  "creationTimestamp":"2014-09-18T18:28:38-04:00",
  "items":[
    {
      "apiVersion":"v1beta2",
      "creationTimestamp":null,
      "id":"docker-registry",
      "kind":"Service",
      "portalIp": "172.30.17.3",
      "port":5001,
      "containerPort":5000,
      "selector":{
        "name":"registrypod"
      }
    },
    {
      "metadata":{
        "name":"docker-registry",
      },
      "kind":"DeploymentConfig",
      "apiVersion":"v1beta1",
      "triggers":[
        {
          "type":"ConfigChange",
        }
      ],
      "template":{
        "strategy":{
          "type":"Recreate"
        },
        "controllerTemplate":{
          "replicas":1,
          "replicaSelector":{
            "name":"registrypod"
          },
          "podTemplate":{
            "desiredState":{
              "manifest":{
                "containers":[
                  {
                    "image":"openshift/docker-registry",
                    "imagePullPolicy":"PullIfNotPresent",
                    "name":"registry-container",
                    "ports":[
                      {
                        "containerPort":5000,
                        "protocol":"TCP"
                      }
                    ],
                    "env":[
                      {
                        "name":"STORAGE_PATH",
                        "value":"/tmp/openshift.local.registry"
                      }
                    ],
                    "volumeMounts":[
                      {
                        "name":"registry-storage",
                        "mountPath":"/tmp/openshift.local.registry",
                        "readOnly":false
                      }
                    ],
                    "command": ["sh", "-c", "REGISTRY_URL=${DOCKER_REGISTRY_SERVICE_HOST}:${DOCKER_REGISTRY_SERVICE_PORT} OPENSHIFT_URL=https://${KUBERNETES_SERVICE_HOST}:${KUBERNETES_SERVICE_PORT}/osapi/v1beta1 OPENSHIFT_INSECURE=true exec docker-registry"],
                    "privileged": true
                  }
                ],
                "version":"v1beta1",
                "volumes":[
                  {
                    "name":"registry-storage",
                    "source":{
                      "hostDir":{
                        "path":"/tmp/openshift.local.registry"
                      }
                    }
                  }
                ]
              },
              "restartpolicy":{

              }
            },
            "labels":{
              "name":"registrypod"
            }
          }
        }
      }
    }
  ]
}
